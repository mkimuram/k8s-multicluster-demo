ARG DAPPER_VERSION
FROM quay.io/submariner/shipyard-dapper-base:${DAPPER_VERSION}

ENV DAPPER_ENV="REPO TAG QUAY_USERNAME QUAY_PASSWORD GITHUB_REF CLUSTERS_ARGS DEPLOY_ARGS CLEANUP_ARGS IMAGES_ARGS RELEASE_ARGS PLUGIN" \
    DAPPER_SOURCE=/go/src/github.com/submariner-io/k8s-multicluster-demo DAPPER_DOCKER_SOCKET=true
ENV DAPPER_OUTPUT=${DAPPER_SOURCE}/output

WORKDIR ${DAPPER_SOURCE}

ENTRYPOINT ["/opt/shipyard/scripts/entry"]
